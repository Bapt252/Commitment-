<!DOCTYPE html>
<html lang="fr">
<!-- ... le reste du code HTML reste identique ... -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Code original...
        
        // Gestion des sélections des postes
        const checkboxes = document.querySelectorAll('.job-select input[type="checkbox"]');
        const selectedCount = document.getElementById('selected-count');
        const selectedText = document.getElementById('selected-text');
        const clearSelection = document.getElementById('clear-selection');
        const confirmSelection = document.getElementById('confirm-selection');
        const notification = document.getElementById('selection-notification');

        function updateSelectedCount() {
            const checked = document.querySelectorAll('.job-select input[type="checkbox"]:checked');
            selectedCount.textContent = checked.length;
            
            if (checked.length === 0) {
                selectedText.textContent = "Aucun poste";
            } else if (checked.length === 1) {
                selectedText.textContent = "1 poste";
            } else {
                selectedText.textContent = `${checked.length} postes`;
            }
            
            if (checked.length > 0) {
                confirmSelection.disabled = false;
                confirmSelection.style.opacity = "1";
                clearSelection.disabled = false;
                clearSelection.style.opacity = "1";
            } else {
                confirmSelection.disabled = true;
                confirmSelection.style.opacity = "0.6";
                clearSelection.disabled = true;
                clearSelection.style.opacity = "0.6";
            }
        }

        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', updateSelectedCount);
        });

        clearSelection.addEventListener('click', function() {
            checkboxes.forEach(checkbox => {
                checkbox.checked = false;
            });
            updateSelectedCount();
        });

        confirmSelection.addEventListener('click', function() {
            // MODIFICATION ICI - Stocker les jobs sélectionnés dans localStorage
            const selectedJobs = [];
            
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    const jobId = checkbox.getAttribute('data-job-id');
                    const jobCard = checkbox.closest('.job-card');
                    
                    if (jobCard && jobId) {
                        // Extraire les données du job
                        const title = jobCard.querySelector('.job-title-info h3').textContent;
                        const company = jobCard.querySelector('.job-info-item:nth-child(1) .info-value').textContent;
                        const salary = jobCard.querySelector('.job-info-item:nth-child(4) .info-value').textContent;
                        const location = jobCard.querySelector('.job-info-item:nth-child(3) .info-value').textContent;
                        const contract = jobCard.querySelector('.contract-badge').textContent;
                        const date = jobCard.querySelector('.job-info-item:nth-child(5) .info-value').textContent;
                        const experience = jobCard.querySelector('.job-info-item:nth-child(6) .info-value').textContent;
                        const matchPercentage = jobCard.querySelector('.match-percentage span').textContent;
                        
                        selectedJobs.push({
                            id: jobId,
                            title,
                            company,
                            salary,
                            location,
                            contract,
                            date,
                            experience,
                            matchPercentage,
                            saveDate: new Date().toISOString()
                        });
                    }
                }
            });
            
            // Sauvegarder dans localStorage
            if (selectedJobs.length > 0) {
                localStorage.setItem('selectedOpportunities', JSON.stringify(selectedJobs));
                
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                    
                    // Rediriger vers la page des opportunités
                    window.location.href = 'candidate-opportunities.html?email=demo.utilisateur%40nexten.fr&password=s';
                }, 2000);
            }
        });

        // Initialiser les états des boutons
        updateSelectedCount();
        
        // Masquer le loader initial
        setTimeout(hideLoader, 300);
    });
</script>
</body>
</html>