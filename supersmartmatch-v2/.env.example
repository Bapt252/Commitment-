# SuperSmartMatch V2 - Environment Configuration
# Copy this file to .env and customize for your environment

# =================== CORE SERVICE CONFIGURATION ===================
ENVIRONMENT=production
SUPERSMARTMATCH_VERSION=2.0.0
SERVICE_NAME=SuperSmartMatch V2
HOST=0.0.0.0
PORT=5070

# =================== EXTERNAL SERVICES ===================
# Nexten Matcher (40K lines ML service)
NEXTEN_MATCHER_URL=http://localhost:5052
NEXTEN_MATCHER_TIMEOUT_MS=3000
NEXTEN_MATCHER_ENABLED=true

# V1 Algorithms (existing 4 algorithms)
V1_ALGORITHMS_URL=http://localhost:5062
V1_ALGORITHMS_TIMEOUT_MS=2000
V1_ALGORITHMS_ENABLED=true

# Redis Cache
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_DB=0
REDIS_ENABLED=true

# =================== FEATURE FLAGS ===================
ENABLE_V2=true
V2_TRAFFIC_PERCENTAGE=100
ENABLE_NEXTEN_ALGORITHM=true
ENABLE_SMART_SELECTION=true
ENABLE_AB_TESTING=true
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_CACHING=true

# =================== ALGORITHM CONFIGURATION ===================
# Nexten Matcher Settings
NEXTEN_PRIORITY=1
NEXTEN_CACHE_TTL_S=600
NEXTEN_CONFIDENCE_THRESHOLD=0.85
NEXTEN_CIRCUIT_BREAKER_THRESHOLD=3
NEXTEN_CIRCUIT_BREAKER_TIMEOUT_S=30

# Smart Match Settings
SMART_PRIORITY=2
SMART_CACHE_TTL_S=3600
SMART_CONFIDENCE_THRESHOLD=0.75
SMART_CIRCUIT_BREAKER_THRESHOLD=5
SMART_CIRCUIT_BREAKER_TIMEOUT_S=60

# Enhanced Algorithm Settings
ENHANCED_PRIORITY=3
ENHANCED_CACHE_TTL_S=1800
ENHANCED_CONFIDENCE_THRESHOLD=0.70

# Semantic Algorithm Settings
SEMANTIC_PRIORITY=4
SEMANTIC_CACHE_TTL_S=1200
SEMANTIC_CONFIDENCE_THRESHOLD=0.68

# Hybrid Algorithm Settings
HYBRID_PRIORITY=5
HYBRID_CACHE_TTL_S=900
HYBRID_CONFIDENCE_THRESHOLD=0.80

# =================== PERFORMANCE SETTINGS ===================
MAX_RESPONSE_TIME_MS=100
MAX_CONCURRENT_REQUESTS=1000
REQUEST_TIMEOUT_MS=10000

# Rate Limiting
RATE_LIMITING_ENABLED=true
REQUESTS_PER_MINUTE=1000
BURST_LIMIT=100

# =================== LOGGING CONFIGURATION ===================
LOG_LEVEL=INFO
LOG_FORMAT=json
ENABLE_ACCESS_LOGS=true
ENABLE_PERFORMANCE_LOGS=true
ENABLE_DEBUG_LOGS=false

# Log Files (for Docker volumes)
LOG_DIR=/var/log/supersmartmatch-v2
APP_LOG_FILE=${LOG_DIR}/app.log
ACCESS_LOG_FILE=${LOG_DIR}/access.log
PERFORMANCE_LOG_FILE=${LOG_DIR}/performance.log

# =================== SECURITY CONFIGURATION ===================
ENABLE_CORS=true
CORS_ALLOW_ORIGINS=*
CORS_ALLOW_METHODS=GET,POST,OPTIONS
CORS_ALLOW_HEADERS=*
CORS_ALLOW_CREDENTIALS=true

# API Security
ENABLE_API_KEY_AUTH=false
API_KEY=your_api_key_here
MAX_PAYLOAD_SIZE_MB=10
ENABLE_INPUT_SANITIZATION=true

# =================== MONITORING & HEALTH CHECKS ===================
HEALTH_CHECK_INTERVAL_S=30
PERFORMANCE_METRICS_ENABLED=true
METRICS_COLLECTION_INTERVAL_S=60
METRICS_RETENTION_DAYS=30

# Alerting Thresholds
RESPONSE_TIME_THRESHOLD_MS=150
ERROR_RATE_THRESHOLD=0.05
CIRCUIT_BREAKER_OPEN_ALERT=true

# =================== DEVELOPMENT SETTINGS ===================
# Uncomment for development mode
# ENVIRONMENT=development
# LOG_LEVEL=DEBUG
# ENABLE_DEBUG_LOGS=true
# ENABLE_HOT_RELOAD=true
# ENABLE_DETAILED_ERRORS=true

# Development External Services
# NEXTEN_MATCHER_URL=http://localhost:5053  # Mock service
# V1_ALGORITHMS_URL=http://localhost:5063   # Mock service

# =================== TESTING SETTINGS ===================
# Uncomment for testing mode
# ENVIRONMENT=testing
# PORT=5071
# ENABLE_MOCK_SERVICES=true
# NEXTEN_MATCHER_URL=http://localhost:5053
# V1_ALGORITHMS_URL=http://localhost:5063
# REDIS_DB=15  # Separate test database

# =================== DOCKER SETTINGS ===================
# Docker Container Configuration
DOCKER_NETWORK=supersmartmatch-network
DOCKER_RESTART_POLICY=unless-stopped
DOCKER_MEMORY_LIMIT=2g
DOCKER_CPU_LIMIT=1.5

# Health Check Settings
HEALTHCHECK_INTERVAL=30s
HEALTHCHECK_TIMEOUT=10s
HEALTHCHECK_RETRIES=3
HEALTHCHECK_START_PERIOD=40s

# =================== MONITORING STACK ===================
# Prometheus
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION=200h

# Grafana
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASSWORD=supersmartmatch2024
GRAFANA_ALLOW_SIGNUP=false

# Nginx Load Balancer
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443
ENABLE_SSL=false
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# =================== ALGORITHM SELECTION RULES ===================
# Complete Data Scenario (Nexten)
COMPLETE_DATA_QUESTIONNAIRE_THRESHOLD=0.8
COMPLETE_DATA_CV_THRESHOLD=0.7
COMPLETE_DATA_REQUIRES_COMPANY_QUESTIONNAIRES=true

# Senior Profile Scenario (Enhanced)
SENIOR_PROFILE_CV_THRESHOLD=0.6
SENIOR_EXPERIENCE_MONTHS_THRESHOLD=84

# Complex Skills Scenario (Semantic)
COMPLEX_SKILLS_THRESHOLD=0.6

# Medium Completeness Scenario (Hybrid)
MEDIUM_QUESTIONNAIRE_THRESHOLD=0.5
MEDIUM_CV_THRESHOLD=0.5

# =================== CUSTOM CONFIGURATION ===================
# Add your custom environment variables here
# CUSTOM_FEATURE_ENABLED=true
# CUSTOM_INTEGRATION_URL=https://api.custom-service.com
# CUSTOM_API_KEY=your_custom_key_here

# =================== DEPLOYMENT INFORMATION ===================
# Deployment metadata (automatically set by deployment scripts)
# DEPLOYMENT_DATE=2024-01-01T00:00:00Z
# DEPLOYMENT_VERSION=2.0.0
# GIT_COMMIT_HASH=abc123def456
# DEPLOYED_BY=deployment_user
